const e=new RegExp("{(.+?)}");function t(e,t){try{return t.split(".").reduce(((e,t)=>e[t]),e)}catch(e){return}}function n({el:e,key:t,oldProps:n}){e.removeAttribute(t),t.startsWith("on")&&e.removeEventListener(t.split("on")[1],n[t],!1)}function r(e,t){for(let n=0;n<Object.keys(t).length;n++){const r=Object.keys(t)[n].toString();r.startsWith("on")&&e.addEventListener(r.split("on")[1],t[r],!1)}}function o(n,r,l){if(l&&(n=n.replace(e,l)),e.test(n)){const l=e.exec(n)[1];a._data.hasOwnProperty(l)?o(n,r,a._data[l]):o(n,r,t(a._data,l.toString()))}else r.textContent=n.toString()}function l(e,t,n){for(let n=0;n<Math.min(e.length,t.length);n++)i(e[n],t[n]);t.length>e.length?t.slice(e.length).forEach((e=>s(e,n))):e.length>t.length&&e.slice(t.length).forEach((e=>{n.removeChild(e.el)}))}function s(t,n,l){if(t.type){const i=document.createElement(t.type);if(t.el=i,t.props){r(i,t.props);for(const n in t.props){if("string"==typeof t.props[n]&&e.test(t.props[n])){const r=e.exec(t.props[n])[1];t.props[n]=t.props[n].replace(e,a._data[r])}i.setAttribute(n,t.props[n])}}t.children&&("string"==typeof t.children[0]||"number"==typeof t.children[0]?o(t.children[0].toString(),i):Array.isArray(t.children[0])?t.children[0].forEach((e=>{s(e,i)})):t.children.forEach((e=>{s(e,i)}))),l?n.insertBefore(i,l):n.appendChild(i)}}function i(i,p){if(i.type!==p.type){const e=i.el.parentNode,t=i.el.nextSibling;return e.removeChild(i.el),void s(p,e,t)}const c=p.el=i.el,h=i.props||{},u=p.props||{};r(c,u);for(const r in u){let[o,l]=[u[r],h[r]];if(null!==o){if(o!==l){if(e.test(o)){const n=e.exec(o)[1];o=a._data.hasOwnProperty(n)?a._data[n]:t(a._data,n.toString())}c.setAttribute(r,o)}}else n({el:c,key:r,oldProps:h})}for(const e in h)e in u||n({el:c,key:e,oldProps:h});const[f,d,y,g]=[i.children[0],p.children[0],i.children,p.children];"string"==typeof d||"number"==typeof d?o(d.toString(),c):"string"!=typeof f?Array.isArray(f)&&Array.isArray(d)?l(f,d,c):l(y,g,c):(c.innerHTML="",g.forEach((e=>s(e,c))))}function p(e,t){if(a.isMounted){const t=e;i(a.oldTree,t),a.oldTree=t}else s(a.oldTree=e,document.querySelector(t)),a.isMounted=!0}async function c(e){"function"==typeof e&&(await e(),p(a._template(),a._el))}const a={_el:null,_data:null,_template:null,oldTree:null,isMounted:!1};function h(e,t){[a._el,a._data,a._template]=[e,t.data,t.template],e&&t.template().type&&p(t.template(),e)}let u=function(e,t,n,r){let o;t[0]=0;for(let l=1;l<t.length;l++){let s=t[l++],i=t[l]?(t[0]|=s?1:2,n[t[l++]]):t[++l];i&&(3===s?r[0]=i:4===s?r[1]=Object.assign(r[1]||{},i):5===s?(r[1]=r[1]||{})[t[++l]]=i:6===s?r[1][t[++l]]+=i+"":s?(o=e.apply(i,u(e,i,n,["",null])),r.push(o),i[0]?t[0]|=2:(t[l-2]=0,t[l]=o)):r.push(i))}return r},f=new Map;const d=function(e){let t=f.get(this);return t||(t=new Map,f.set(this,t)),(t=u(this,t.get(e)||(t.set(e,t=function(e){let t,n,r,o=1,l="",s="",i=[0],p=0;for(r=function(e){1===o&&(e||(l=l.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?i.push(0,e,l):3===o&&(e||l)?(i.push(3,e,l),o=2):2===o&&"..."===l&&e?i.push(4,e,0):2===o&&l&&!e?i.push(5,0,!0,l):o>=5&&((l||!e&&5===o)&&(i.push(o,0,l,n),o=6),e&&(i.push(o,e,0,n),o=6)),l=""};p<e.length;p++){p&&(1===o&&r(),r(p));for(let c=0;c<e[p].length;c++)t=e[p][c],1===o?"<"===t?(r(),i=[i],o=3):l+=t:4===o?"--"===l&&">"===t?(o=1,l=""):l=t+l[0]:s?t===s?s="":l+=t:'"'===t||"'"===t?s=t:">"===t?(r(),o=1):o&&("="===t?(o=5,n=l,l=""):"/"===t&&(o<5||">"===e[p][c+1])?(r(),3===o&&(i=i[0]),o=i,(i=i[0]).push(2,0,o),o=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(r(),o=2):l+=t),3===o&&"!--"===l&&(o=4,i=i[0])}return r(),i}(e)),t),arguments,[])).length>1?t:t[0]}.bind((function(e,t,...n){return{type:e,props:t,children:n}}));export{h as Strve,d as render,c as updateView};
