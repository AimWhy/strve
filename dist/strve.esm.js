const e=new RegExp("{(.+?)}"),t=u("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),n={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},r="http://www.w3.org/1999/xlink",o=u("svg,animate,circle,clippath,cursor,image,defs,desc,ellipse,filter,font-faceforeignobject,g,glyph,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feFlood,feGaussianBlur,feImage,feMerge,feMorphology,feOffset,feSpecularLighting,feTile,feTurbulence,feDistantLight,fePointLight,feSpotLight,linearGradient,stop,radialGradient,animateTransform,animateMotion");function l(e,t){for(let n in t)e.style[n]=t[n]}function i(e,t,n){const r=new CustomEvent(e,t);r&&document.querySelector(n).dispatchEvent(r)}function s(e,t){for(let n=0;n<Object.keys(t).length;n++){const r=Object.keys(t)[n].toString();if(r.startsWith("on")){const n=r.split("on")[1][0].toLowerCase()+r.split("on")[1].substring(1);e.addEventListener(n,t[r],!1)}}}function a({el:e,key:t,oldProps:n}){var o;if(p(t)?e.removeAttributeNS(r,p(o=t)?o.slice(6,o.length):""):e.removeAttribute(t),t.startsWith("on")){const r=t.split("on")[1][0].toLowerCase()+t.split("on")[1].substring(1);e.removeEventListener(r,n[t],!1)}}function c(t,n,r){if(r&&(t=t.replace(e,r)),e.test(t)){const r=e.exec(t)[1];b._data.hasOwnProperty(r)?c(t,n,b._data[r]):c(t,n,function(e,t){try{return t.split(".").reduce(((e,t)=>e[t]),e)}catch(e){return}}(b._data,r.toString()))}else n.textContent=t.toString()}function p(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)}function u(e){const t=Object.create(null),n=e.split(",");for(let e=0;e<n.length;e++)t[n[e]]=!0;return function(e){return t[e]}}function h(e){return t(e)?document.createElement(e):o(e)?(r=function(e){return o(e)?"svg":"math"===e?"math":void 0}(e),l=e,document.createElementNS(n[r],l)):void 0;var r,l}function f(e,t,n){if(e.type){const o=h(e.type);if(e.el=o,e.props){s(o,e.props);for(const t in e.props)e.props.hasOwnProperty(t)&&("function"!=typeof e.props[t]&&(p(t)?o.setAttributeNS(r,t,e.props[t]):o.setAttribute(t,e.props[t])),"object"==typeof e.props[t]&&null!==typeof e.props[t]&&l(o,e.props[t]))}e.children&&("string"==typeof e.children[0]||"number"==typeof e.children[0]?c(e.children[0].toString(),o):Array.isArray(e.children[0])?e.children[0].forEach((e=>{f(e,o)})):e.children.forEach((e=>{f(e,o)}))),n?t.insertBefore(o,n):t.appendChild(o)}}function d(e,t,n){!function(e,t){if(e.type!==t.type){const n=e.el.parentNode,r=e.el.nextSibling;n.removeChild(e.el),f(t,n,r)}}(e,t);const o=t.el=e.el,i=e.props||{},u=t.props||{};s(o,u);for(const e in u){let[t,n]=[u[e],i[e]];t!==n?null!==t?"function"!=typeof t&&(o[e]&&(o[e]=t),p(e)?o.setAttributeNS(r,e,t):o.setAttribute(e,t)):a({el:o,key:e,oldProps:i}):"object"==typeof t&&null!==typeof t&&l(o,t)}for(const e in i)e in u||a({el:o,key:e,oldProps:i});const[h,d,m,y]=[e.children[0],t.children[0],e.children,t.children];"string"==typeof d||"number"==typeof d?c(d.toString(),o):"string"!=typeof h?Array.isArray(h)&&Array.isArray(d)?g(h,d,o,n):g(m,y,o,n):(o.innerHTML="",y.forEach((e=>f(e,o))))}function g(e,t,n,r){if("useFkey"===r)for(let o=1;o<=Math.max(e.length,t.length);o++)e[e.length-o]?t[t.length-o]?d(e[e.length-o],t[t.length-o],r):n.removeChild(e[e.length-o].el):f(t[t.length-o],e[e.length-1].el.parentNode,e[0].el);else{for(let n=0;n<Math.min(e.length,t.length);n++)d(e[n],t[n]);t.length>e.length?t.slice(e.length).forEach((e=>f(e,n))):e.length>t.length&&e.slice(t.length).forEach((e=>{n.removeChild(e.el)}))}}function m(e,t,n){if(b.isMounted){const t=e;d(b.oldTree,t,n),b.oldTree=t}else f(b.oldTree=e,document.querySelector(t)),b.isMounted=!0}function y(e,t){if("function"==typeof e&&"undefined"!=typeof Promise)return Promise.resolve().then((()=>{e()})).then((()=>{"useRouter"===t?(document.querySelector(b._el).innerHTML="",f(b.oldTree=b._template(),document.querySelector(b._el))):m(b._template(),b._el,t)})).catch((e=>console.error(e)))}const b={_el:null,_data:null,_template:null,oldTree:null,isMounted:!1},v="2.3.1";function w(e,t){if(e){[b._el,b._data,b._template]=[e,t.data,t.template];const n=t.template();n[0]?console.error("[Strve warn]: Check that the view has only one root element, or that other elements are written correctly."):m(n,e)}else console.error("[Strve warn]: There must be a mount element node.")}let M=function(e,t,n,r){let o;t[0]=0;for(let l=1;l<t.length;l++){let i=t[l++],s=t[l]?(t[0]|=i?1:2,n[t[l++]]):t[++l];void 0===s&&null===s||(3===i?r[0]=s:4===i?r[1]=Object.assign(r[1]||{},s):5===i?(r[1]=r[1]||{})[t[++l]]=s:6===i?r[1][t[++l]]+=s+"":i?(o=e.apply(s,M(e,s,n,["",null])),r.push(o),s[0]?t[0]|=2:(t[l-2]=0,t[l]=o)):r.push(s))}return r},S=new Map;const k=function(e){let t=S.get(this);return t||(t=new Map,S.set(this,t)),(t=M(this,t.get(e)||(t.set(e,t=function(e){let t,n,r,o=1,l="",i="",s=[0],a=0;for(r=function(e){1===o&&(e||(l=l.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(0,e,l):3===o&&(e||l)?(s.push(3,e,l),o=2):2===o&&"..."===l&&e?s.push(4,e,0):2===o&&l&&!e?s.push(5,0,!0,l):o>=5&&((l||!e&&5===o)&&(s.push(o,0,l,n),o=6),e&&(s.push(o,e,0,n),o=6)),l=""};a<e.length;a++){a&&(1===o&&r(),r(a));for(let c=0;c<e[a].length;c++)t=e[a][c],1===o?"<"===t?(r(),s=[s],o=3):l+=t:4===o?"--"===l&&">"===t?(o=1,l=""):l=t+l[0]:i?t===i?i="":l+=t:'"'===t||"'"===t?i=t:">"===t?(r(),o=1):o&&("="===t?(o=5,n=l,l=""):"/"===t&&(o<5||">"===e[a][c+1])?(r(),3===o&&(s=s[0]),o=s,(s=s[0]).push(2,0,o),o=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(r(),o=2):l+=t),3===o&&"!--"===l&&(o=4,s=s[0])}return r(),s}(e)),t),arguments,[])).length>1?t:t[0]}.bind((function(e,t,...n){return{type:e,props:t,children:n}}));export{w as Strve,i as emitEvent,k as render,v as strveVersion,y as updateView};
