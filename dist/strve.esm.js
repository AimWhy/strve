const e=new RegExp("{(.+?)}");function t(e,t){try{return t.split(".").reduce(((e,t)=>e[t]),e)}catch(e){return}}function n({el:e,key:t,oldProps:n}){e.removeAttribute(t),t.startsWith("on")&&e.removeEventListener(t.split("on")[1],n[t],!1)}function r(e,t){for(let n=0;n<Object.keys(t).length;n++){const r=Object.keys(t)[n].toString();r.startsWith("on")&&e.addEventListener(r.split("on")[1],t[r],!1)}}function o(n,r,l){if(l&&(n=n.replace(e,l)),e.test(n)){const l=e.exec(n)[1];a._data.hasOwnProperty(l)?o(n,r,a._data[l]):o(n,r,t(a._data,l.toString()))}else r.textContent=n.toString()}function l(e,t,n){for(let n=0;n<Math.min(e.length,t.length);n++)s(e[n],t[n]);t.length>e.length?t.slice(e.length).forEach((e=>i(e,n))):e.length>t.length&&e.slice(t.length).forEach((e=>{n.removeChild(e.el)}))}function i(t,n,l){if(t.type){const s=document.createElement(t.type);if(t.el=s,t.props){r(s,t.props);for(const n in t.props){if("string"==typeof t.props[n]&&e.test(t.props[n])){const r=e.exec(t.props[n])[1];t.props[n]=t.props[n].replace(e,a._data[r])}s.setAttribute(n,t.props[n])}}t.children&&("string"==typeof t.children[0]||"number"==typeof t.children[0]?o(t.children[0].toString(),s):Array.isArray(t.children[0])?t.children[0].forEach((e=>{i(e,s)})):t.children.forEach((e=>{i(e,s)}))),l?n.insertBefore(s,l):n.appendChild(s)}}function s(s,c){if(s.type!==c.type){const e=s.el.parentNode,t=s.el.nextSibling;return e.removeChild(s.el),void i(c,e,t)}const p=c.el=s.el,u=s.props||{},h=c.props||{};r(p,h);for(const r in h){let[o,l]=[h[r],u[r]];if(null!==o){if(o!==l){if(e.test(o)){const n=e.exec(o)[1];o=a._data.hasOwnProperty(n)?a._data[n]:t(a._data,n.toString())}p.setAttribute(r,o)}}else n({el:p,key:r,oldProps:u})}for(const e in u)e in h||n({el:p,key:e,oldProps:u});const[d,f,y,g]=[s.children[0],c.children[0],s.children,c.children];"string"==typeof f||"number"==typeof f?o(f.toString(),p):"string"!=typeof d?Array.isArray(d)&&Array.isArray(f)?l(d,f,p):l(y,g,p):(p.innerHTML="",g.forEach((e=>i(e,p))))}function c(e,t){if(a.isMounted){const t=e;s(a.oldTree,t),a.oldTree=t}else i(a.oldTree=e,document.querySelector(t)),a.isMounted=!0}async function p(e,t){"function"!=typeof e||t?"useRouter"===t&&(await e(),document.querySelector(a._el).innerHTML="",i(a._template(),document.querySelector(a._el))):(await e(),c(a._template(),a._el))}const a={_el:null,_data:null,_template:null,oldTree:null,isMounted:!1};function u(e,t){[a._el,a._data,a._template]=[e,t.data,t.template],c(t.template(),e)}let h=function(e,t,n,r){let o;t[0]=0;for(let l=1;l<t.length;l++){let i=t[l++],s=t[l]?(t[0]|=i?1:2,n[t[l++]]):t[++l];s&&(3===i?r[0]=s:4===i?r[1]=Object.assign(r[1]||{},s):5===i?(r[1]=r[1]||{})[t[++l]]=s:6===i?r[1][t[++l]]+=s+"":i?(o=e.apply(s,h(e,s,n,["",null])),r.push(o),s[0]?t[0]|=2:(t[l-2]=0,t[l]=o)):r.push(s))}return r},d=new Map;const f=function(e){let t=d.get(this);return t||(t=new Map,d.set(this,t)),(t=h(this,t.get(e)||(t.set(e,t=function(e){let t,n,r,o=1,l="",i="",s=[0],c=0;for(r=function(e){1===o&&(e||(l=l.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(0,e,l):3===o&&(e||l)?(s.push(3,e,l),o=2):2===o&&"..."===l&&e?s.push(4,e,0):2===o&&l&&!e?s.push(5,0,!0,l):o>=5&&((l||!e&&5===o)&&(s.push(o,0,l,n),o=6),e&&(s.push(o,e,0,n),o=6)),l=""};c<e.length;c++){c&&(1===o&&r(),r(c));for(let p=0;p<e[c].length;p++)t=e[c][p],1===o?"<"===t?(r(),s=[s],o=3):l+=t:4===o?"--"===l&&">"===t?(o=1,l=""):l=t+l[0]:i?t===i?i="":l+=t:'"'===t||"'"===t?i=t:">"===t?(r(),o=1):o&&("="===t?(o=5,n=l,l=""):"/"===t&&(o<5||">"===e[c][p+1])?(r(),3===o&&(s=s[0]),o=s,(s=s[0]).push(2,0,o),o=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(r(),o=2):l+=t),3===o&&"!--"===l&&(o=4,s=s[0])}return r(),s}(e)),t),arguments,[])).length>1?t:t[0]}.bind((function(e,t,...n){return{type:e,props:t,children:n}}));export{u as Strve,f as render,p as updateView};
