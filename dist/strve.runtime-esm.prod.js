/*!
 * Strve.js v4.5.0
 * (c) 2021-2022 maomincoding
 * Released under the MIT License.
 */
const e=l("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot"),t=l("svg,animate,circle,clippath,cursor,image,defs,desc,ellipse,filter,font-faceforeignobject,g,glyph,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feFlood,feGaussianBlur,feImage,feMerge,feMorphology,feOffset,feSpecularLighting,feTile,feTurbulence,feDistantLight,fePointLight,feSpotLight,linearGradient,stop,radialGradient,animateTransform,animateMotion");function n(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)}function r(e){return-1!==["object","array","function","regexp","date","math"].indexOf(o(e))}function o(e){return Object.prototype.toString.call(e).match(/\[object (.+?)\]/)[1].toLowerCase()}function l(e){const t=Object.create(null),n=e.split(",");for(let e=0;e<n.length;e++)t[n[e]]=!0;return function(e){return t[e]}}function i(e){if(e.hasOwnProperty("tag")&&e.hasOwnProperty("props")&&e.hasOwnProperty("children"))return!0}function s(e){if("array"===o(e)){for(let t=0;t<e.length;t++)if(i(e[t]))return!0}else if("object"===o(e))return i(e)}l("function,regexp,date,math,undefined,null,boolean,string,number,symbol,bigInt");const a=e=>("object"==typeof e||"function"==typeof e)&&null!==e;function c(e,t){if(!a(e)||!a(t))return e===t;if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const n in e){if(!c(e[n],t[n]))return!1}return!0}const u={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},f="http://www.w3.org/1999/xlink";function p(e,t){for(let n in t)e.style[n]=t[n]}function d(e,t,r){var o;if(n(t)?e.removeAttributeNS(f,n(o=t)?o.slice(6,o.length):""):e.removeAttribute(t),t.startsWith("on")){const n=t.split("on")[1][0].toLowerCase()+t.split("on")[1].substring(1);e.removeEventListener(n,r[t])}}function h(n){return e(n)?document.createElement(n):t(n)?(r=function(e){return t(e)?"svg":"math"===e?"math":void 0}(n),o=n,document.createElementNS(u[r],o)):"fragment"===n||"component"===n?document.createDocumentFragment():"comment"===n||"null"===n?document.createComment(n):void 0;var r,o}function g(e){return e.tag?e:function(e){return{tag:"fragment",props:null,children:e}}(e)}const m=Object.create(null),b=new WeakMap,y=["$key","$name","$props"];let w="";const v=Object.create(null);let O=function e(t={}){if("object"!=typeof t||null===t)return t;const n={get(t,n,r){if(Reflect.ownKeys(t).includes(n)){const o=Reflect.get(t,n,r);return e(o)}},set(e,t,n,r){if(n===e[t])return!0;if(Reflect.ownKeys(e).includes(t)||Object.keys(m).includes(t)){return Reflect.set(e,t,n,r)}},deleteProperty:(e,t)=>Reflect.deleteProperty(e,t)};return new Proxy(t,n)}(Object.create(null));function j(e,t,r){if(e.tag){const l=h(e.tag);if(e.props){!function(e,t){for(let n=0;n<Object.keys(t).length;n++){const r=Object.keys(t)[n].toString();if(r.startsWith("on")){const n=r.split("on")[1][0].toLowerCase()+r.split("on")[1].substring(1);e.addEventListener(n,t[r])}}}(l,e.props),e.props.hasOwnProperty(y[0])&&(e.el=l,"string"===o(e.props[y[0]])&&(v[e.props[y[0]]]=l)),e.props.hasOwnProperty(y[1])&&(m[e.props[y[1]]]=Object.create(null),b.set(m[e.props[y[1]]],e.children[0])),e.props.hasOwnProperty(y[1])&&e.props.hasOwnProperty(y[2])&&(O[e.props[y[1]]]=e.props[y[2]]);for(const t in e.props)e.props.hasOwnProperty(t)&&("function"!==o(e.props[t])&&(n(t)?l.setAttributeNS(f,t,e.props[t]):y.includes(t)||l.setAttribute(t,e.props[t])),"object"===o(e.props[t])&&p(l,e.props[t]))}if(e.children){M(e.children,l,(function(){"array"===o(e.children[0])?e.children[0].forEach((e=>{i(e)&&j(e,l)})):"array"===o(e.children)&&e.children.forEach((e=>{i(e)&&j(e,l)}))}))}r?t.insertBefore(l,r):t.appendChild(l)}}function S(e,t,r){const l=e.props||{};if(l.hasOwnProperty(y[0])&&e.tag!==t.tag){const n=e.el.parentNode,r=e.el.nextSibling;n.removeChild(e.el),j(t,n,r)}else{let i=null;if(l.hasOwnProperty(y[0])){const r=t.props||{};i=t.el=e.el;for(const e in r){let[t,s]=[r[e],l[e]];if(t!==s)if(null!==t)if("function"===o(t)||y.includes(e)){if(e.startsWith("on")){const n=e.split("on")[1][0].toLowerCase()+e.split("on")[1].substring(1);i.addEventListener(n,t,!1)}}else i[e]&&(i[e]=t),n(e)?i.setAttributeNS(f,e,t):i.setAttribute(e,t),"object"===o(t)&&p(i,t);else d(i,e,l)}for(const e in l)e in r||d(i,e,l)}const s=e.children[0],a=t.children[0],u=e.children,h=t.children;if(!c(u,h)){M(h,i,(function(){"array"!==o(s)&&"array"===o(a)?(i.innerHTML="",a.forEach((e=>j(e,i)))):"array"===o(s)&&"array"===o(a)?x(s,a,i,r):x(u,h,i,r)}))}}}function x(e,t,n,r){if("useFirstKey"===r)for(let o=1;o<=Math.max(e.length,t.length);o++)e[e.length-o]?t[t.length-o]?S(e[e.length-o],t[t.length-o],r):n.removeChild(e[e.length-o].el):j(t[t.length-o],e[e.length-1].el.parentNode,e[0].el);else{for(let n=0;n<Math.min(e.length,t.length);n++)S(e[n],t[n],r);t.length>e.length?t.slice(e.length).forEach((e=>j(e,n))):e.length>t.length&&e.slice(t.length).forEach((e=>{n.removeChild(e.el)}))}}function M(e,t,n){1!==e.length||r(e[0])?e.length>1&&!s(e)?t&&k(e.join().replace(/,/g,""),t):!r(e[0])||e[0].tag||s(e[0])?n():t&&k(e[0],t):t&&k(e,t)}function k(e,t){r(e)?"function"===o(e)||"regexp"===o(e)||"array"===o(e)?t.textContent=String(e):t.textContent=JSON.stringify(e,null,2):t.textContent=e?e.toString():String(e)}let C=null;function L(e){C=e}let P=null;function E(e){P=e}let T=null;function _(e){T=e}function A(e,t,n,r){if(W.isMounted){const t=g(e);S(W.oldTree,t,n),W.oldTree=t,r&&b.set(m[r],e)}else{const n=g(e);j(n,t),W.oldTree=n,W.isMounted=!0,C&&C()}}function R(e,t){if("function"===o(e)&&"undefined"!==o(Promise))return Promise.resolve().then((()=>{e()})).then((()=>{if(t&&"useRouter"===t.status)P&&P(),W._el.innerHTML="",P=null,j(W.oldTree=W._template(),W._el),C&&C();else if(t&&"function"==typeof t.name){const e=t.name.name,n=t.name();w!==e&&(w=e,W.oldTree=g(b.get(m[e]))),A(n,W._el,t.status,e)}else{const e=t&&t.status?t.status:null;A(W._template(),W._el,e)}T&&T()})).catch((e=>console.error(e)))}const N="4.5.0",W={_el:null,_template:null,oldTree:null,isMounted:!1,observer:null};function D(e){if("string"==typeof e){const t=document.querySelector(e);if(!t){let t=null;return e.startsWith("#")?(t=document.createElement("div"),t.setAttribute("id",e.substring(1,e.length))):e.startsWith(".")?(t=document.createElement("div"),t.setAttribute("class",e.substring(1,e.length))):console.warn(`[Strve warn]: Failed to mount app: mount target selector "${e}" returned null.`),document.body.insertAdjacentElement("afterbegin",t),t}return t}return e instanceof HTMLElement?e:window.ShadowRoot&&e instanceof window.ShadowRoot&&"closed"===e.mode?(console.warn('[Strve warn]: mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs.'),null):null}function F(e){return{mount(t){if(D(t)){const n=e();W._template=e,W._el=D(t),W._el&&A(n,W._el)}else console.warn("[Strve warn]: There must be a mount element node.")}}}export{F as createApp,v as domInfo,_ as nextTick,L as onMounted,E as onUnmounted,O as propsData,R as setData,N as version};
